# LEGENDA
✔ Done
⭐ priority
❌ Won't do (could be revisited)

# TODO
- ✔ Maybe change online dict to class? could benefit i think
- ✔ When script crashes it should JUST CRASH, why keep it alive? print crashlog and let it crash.
- ✔ Fix de #include mess for local scripts do it properly
- ✔ Maybe change back dict to class? just like online (now Server)!
- ✔ makeBackup() works properly
- ✔ RCON PASSWORD IS ALWAYS THE SAME WTF BRO CHANGE CHANGE
- ✔ check placeholder.bat when starting 
- ✔ hot add server
- ⭐⭐⭐⭐⭐⭐ STARTING >1 SERVER DOES NOT UPDATE server.properties FIX ASAP
- ⭐⭐⭐⭐automate first server start
- ⭐⭐⭐⭐⭐rcon.passw should never be printed, fix that
- ⭐add per-server settings
- ⭐automatically set bungeecord settings (command)
- ⭐AT startup:
	- Check if servers are on (fast or threads?)
	- Start autobackup with timer
- ⭐print something randomly in server if online
- ⭐add info command
- ⭐[easy] TODO 0 (check if there are online servers before exiting)
- ❌check if port is forwarded at startup

# FIXME
- FIXME 0 `server[x].name in dirs` checks if server exits in dirs (but I want the opposite: check if dirs[x] exists in server[])
- FIXME 1
- FIXME 2 multithreading excuse
- FIXME 3 autobackup function implement
- FIXME 4 tell server to save world
- FIXME 6 could use `server[ServerID].name` ?? (consider for every `dirGrab()` call)
- FIXME 9 TOTAL BULLSHIT FIND A WAY AROUND IT 
- FIXME 10 info on line

# TESTING
- ✔ what if dirs change runtime? *1 (added feature: hot swap)
- ✔ What happens if start.bat is not in zscripts (it is generated at startup)
- ⭐LOOK THROUGH EVERY FUCKING COMMAND
- ✔ start / stop / restart functions
- ⭐⭐ Stopping Server1 sometimes halts until you enter in game console
- ✔ `in server[i]` syntax

# CODE REVIEW
- check(id, port)
- printOnline() and listOnline() with ls()
- sendRcon()
- verifyStatus()
- dirGrab() function seems to be used A LOT (FIXME 6 could lower the usage), possible BUG: (TESTING *1)
- batter():
	- I file che crea vanno bene per lo script ma non sono utilizzabili dall'utente in maniera manuale
	- Poss. sol:
		- Crea 2 file bat
		- Modifica il file bat prima di far partire il server
		
# ⭐REMINDERS⭐
- add everything in help
- add `requirements.txt`
- update createConfig() when changing properties.ini

#  -------------------------- Structures --------------------------  #
Backups dict:
	back{id: [aaId, date, [IDs]} | `back[id] = [aaId, date, [IDs]]`
    	        0     1    2[]  

Online Class:
	start.py has a list of Server objects -> server[Server]
	properties:
	server[x].name
	server[x].state
	server[x].port
	server[x].rcon
	server[x].psw  #YET TO IMPLEMENT

	functions:
	isAlive()	isServerAlive is moving there (noy implemented yet)
	isOnline()	(returns False if state == 0 else True)
	setParam(param, value)	sets an Object param
	getData()	Returns Object properties in a list

V discontinued V
Online dict DEPRECATED:
	online = {onlineId: ['Server', state, port, rcon]}  |  `online[onlineId] = ['Server', state, port, rcon]`
	state can be: 0:offline, 1:online, 2:restarting
#  -------------------------- BACKUP RELATED --------------------------  #

#autobackup: [time (minutes)] multithreading??
restorebackup()

#  --------------------------------------------------------------------  #


> port 25545
[14-11-2021, 23:03:31]: [FUNC] - modPort(25545, True)
[14-11-2021, 23:03:31]: [ERROR] - 
Traceback (most recent call last):
  File "c:\Users\Latif\Desktop\Programmazione\McServerManager\start.py", 
line 1788, in <module>
    resp = main(run)
  File "c:\Users\Latif\Desktop\Programmazione\McServerManager\start.py", 
line 1700, in main
    modPort(command[1])
  File "c:\Users\Latif\Desktop\Programmazione\McServerManager\start.py", 
line 720, in modPort
    if newPort >= int(config['rcon-port']):
TypeError: '>=' not supported between instances of 'str' and 'int' 